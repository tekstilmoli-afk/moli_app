{% load static %}

<div class="table-responsive">
    <table class="table table-striped table-bordered table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>Sipari≈ü No</th>
                <th>M√º≈üteri</th>
                <th>√úr√ºn Kodu</th>
                <th>Adet</th>
                <th>Renk</th>
                <th>Beden</th>
                <th>Teslim Tarihi</th>
                <th>QR Kod</th>
                <th>Etiket</th>
                <th>Detay</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td>{{ order.siparis_numarasi }}</td>
                <td>{{ order.musteri }}</td>
                <td>{{ order.urun_kodu }}</td>
                <td>{{ order.adet }}</td>
                <td>{{ order.renk }}</td>
                <td>{{ order.beden }}</td>
                <td>{{ order.teslim_tarihi|date:"d.m.Y" }}</td>
                <td>
                    {% if order.qr_code %}
                        <!-- ‚úÖ QR kod i√ßin MEDIA_URL kullan -->
                        <img class="qr-img" 
                             src="{{ order.qr_code.url }}" 
                             alt="QR Kod" width="50" height="50">
                    {% else %}
                        <span class="text-muted small fst-italic">QR Yok</span>
                    {% endif %}
                </td>
                <td>
                    {% if order.qr_code %}
                        <button class="btn btn-sm btn-outline-secondary print-btn"
                            onclick="printLabel(
                                '{{ order.siparis_numarasi|escapejs }}',
                                '{{ order.musteri|default_if_none:""|escapejs }}',
                                '{{ order.urun_kodu|default_if_none:""|escapejs }}',
                                '{{ order.adet|default_if_none:""|escapejs }}',
                                '{{ order.qr_code.url }}'
                            )">
                            üñ®Ô∏è Yazdƒ±r
                        </button>
                    {% else %}
                        <span class="text-muted small fst-italic">-</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'order_detail' order.id %}" class="btn btn-sm btn-primary">G√∂r√ºnt√ºle</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="10" class="text-center text-muted py-4">Hen√ºz sipari≈ü bulunmuyor.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

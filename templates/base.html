<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <!-- ðŸ“± Mobil tam ekran iÃ§in gerekli -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}MoliApp{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  {% block extra_css %}
<style>
    .qr-img {
        width: 50px;
        height: 50px;
        object-fit: cover;
    }

    /* ðŸ“± Mobil Uyum: Tablo kaydÄ±rmasÄ±z olacak ÅŸekilde kÃ¼Ã§Ã¼lt */
    @media (max-width: 768px) {

        /* Tablonun tamamÄ± ekrana sÄ±ÄŸsÄ±n */
        .table {
            table-layout: fixed !important;
            width: 100% !important;
            font-size: 12px;
        }

        /* HÃ¼cre iÃ§erikleri taÅŸmasÄ±n, satÄ±r kirilsin */
        th, td {
            white-space: normal !important;
            word-wrap: break-word !important;
            font-size: 11px !important;
            padding: 4px !important;
        }

        /* BaÅŸlÄ±klar kÃ¼Ã§Ã¼lsÃ¼n */
        th {
            font-size: 11px !important;
        }

        /* QR resmini kÃ¼Ã§Ã¼lt */
        .qr-img {
            width: 35px !important;
            height: 35px !important;
        }

        /* KÃ¼Ã§Ã¼k butonlar */
        .btn-sm {
            padding: 2px 6px !important;
            font-size: 11px !important;
        }
    }
</style>
{% endblock %}


</head>

<body>

<!-- ðŸ”¥ NAVBAR BAÅžLIYOR -->
<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm mb-4">
  <div class="container-fluid d-flex justify-content-between align-items-center">

    <!-- Logo -->
    <a class="navbar-brand fw-bold" href="{% url 'order_list' %}">
      MOLÄ° APP
    </a>

    {% if user.is_authenticated %}
    <div class="d-flex align-items-center">

      <!-- ðŸ”” Bildirimler (istersen aÃ§abilirsin) -->
      <div class="dropdown me-3">
        <button class="btn btn-light dropdown-toggle" data-bs-toggle="dropdown">
  ðŸ”” Bildirimler{% if unread_notification_count > 0 %}(
    <span class="text-danger fw-bold">{{ unread_notification_count }}</span>
  ){% endif %}
</button>


        <ul class="dropdown-menu dropdown-menu-end" style="width: 320px; max-height: 400px; overflow-y: auto;">
          <li class="dropdown-header fw-bold">Bildirimler</li>

          {% for n in all_notifications|slice:":10" %}
          <li>
            <a href="{% url 'notification_read' n.id %}"
               class="dropdown-item small {% if not n.is_read %}fw-bold{% endif %}">
              {{ n.title }}<br>
              <small class="text-muted">{{ n.timestamp|date:"d.m.Y H:i" }}</small>
            </a>
          </li>
          {% empty %}
          <li><span class="dropdown-item text-muted">HenÃ¼z bildirim yok.</span></li>
          {% endfor %}

          <li><hr class="dropdown-divider"></li>
          <li><a href="{% url 'notification_list' %}" class="dropdown-item text-center">TÃ¼mÃ¼nÃ¼ GÃ¶r</a></li>
        </ul>
      </div>
  

      <!-- KullanÄ±cÄ± -->
      <span class="me-3">ðŸ‘¤ {{ user.username }}</span>
      <a href="{% url 'logout' %}" class="btn btn-outline-danger btn-sm">Ã‡Ä±kÄ±ÅŸ Yap</a>

    </div>
    {% endif %}

  </div>
</nav>
<!-- ðŸ”¥ NAVBAR BÄ°TÄ°YOR -->

<!-- ANA Ä°Ã‡ERÄ°K -->
{% block content %}{% endblock %}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% block extra_js %}{% endblock %}
</body>
</html>
